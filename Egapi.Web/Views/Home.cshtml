@inherits Umbraco.Web.Mvc.UmbracoViewPage<ContentModels.Home>
@using ContentModels = Umbraco.Web.PublishedModels;
@{
    Layout = "Main.cshtml";
    var selection = Umbraco.Content(Guid.Parse("79f8284c-ebc9-416f-9571-951c93041d24"))
    .ChildrenOfType("contentPage")
    .Where(x => x.IsVisible());

    string active = "active";
}
<!-- Carousel -->
<div class="egapiCarousel">
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            @for (int i = 0; i < selection.Count(); i++)
            {
                if (i != 0)
                {
                    <li data-target="#carouselExampleIndicators" data-slide-to="@i"></li>
                }
                else
                {
                    <li data-target="#carouselExampleIndicators" data-slide-to="@i" class="active"></li>
                }
            }
        </ol>
        <div class="carousel-inner">
            @foreach (var item in selection)
            {
                var skdljflskjdf = selection.Count();
                int i = 0;
                int j = 0;
                var imgs = item.Value<IEnumerable<IPublishedContent>>("contentPageImages");
                foreach (var img in imgs)
                {
                    j++;
                    if (i == 0)
                    {
                        i++;
                        <div class="carousel-item @active">
                            <img class="d-block egapiCarousel" src="@img.Url" alt="First slide">
                            <div class="carousel-caption d-none d-md-block">
                                <h5>Segurança</h5>
                                <p>Segure a segurança</p>
                            </div>
                        </div>
                        if (!string.IsNullOrEmpty(active))
                        {
                            active = "";
                        }
                        break;
                    }
                }
            }
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

<!-- Cards    TAVA AQUI A TRATAR DOS CARDS POR CAUSA DAS CATEGORIAS-->
@Html.Partial("More About Us Card Carousel")