@inherits Umbraco.Web.Mvc.UmbracoViewPage
@using ContentModels = Umbraco.Web.PublishedModels;
@{
    Layout = "Main.cshtml";
    var selection = Umbraco.Content(Guid.Parse("79f8284c-ebc9-416f-9571-951c93041d24"))
    .ChildrenOfType("contentPage")
    .Where(x => x.IsVisible());

    string active = "active";
}
<!-- Carousel -->
<div class="mainCarousel">
    <div id="mainCarouselIndicators" class="carousel slide carousel-fade" data-ride="carousel">
        <ol class="carousel-indicators">
            @for (int i = 0; i < selection.Count(); i++)
            {
                if (i != 0)
                {
                    <li data-target="#mainCarouselIndicators" data-slide-to="@i"></li>
                }
                else
                {
                    <li data-target="#mainCarouselIndicators" data-slide-to="@i" class="active"></li>
                }
            }
        </ol>
        <div class="carousel-inner">
            @foreach (var item in selection)
            {
                var imgs = item.Value<IEnumerable<IPublishedContent>>("contentPageImages");
                var contentPageTitle = item.Value<string>("contentPageTitle");
                var contentPageDescription = item.Value<string>("contentPageDescription");
                <div class="carousel-item @active">
                    <img class="d-block carouselImg" src="@imgs.FirstOrDefault().Url" alt="First slide">
                    <div class="carousel-text carousel-caption d-none d-md-block">
                        <h1>
                            <strong>
                                @contentPageTitle
                            </strong>
                        </h1>
                        <p>
                            <strong>
                                @contentPageDescription
                            </strong>
                        </p>
                    </div>
                </div>
                if (!string.IsNullOrEmpty(active))
                {
                    active = "";
                }
            }
        </div>
        <a class="carousel-control-prev" href="#mainCarouselIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#mainCarouselIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

@Html.Partial("Cards/More About Us Card Carousel")